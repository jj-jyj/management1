{"remainingRequest":"D:\\jiao\\uni-app\\management1\\node_modules\\babel-loader\\lib\\index.js!D:\\jiao\\uni-app\\management1\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\jiao\\uni-app\\management1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\jiao\\uni-app\\management1\\src\\views\\user\\User.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\jiao\\uni-app\\management1\\src\\views\\user\\User.vue","mtime":1604290364860},{"path":"D:\\jiao\\uni-app\\management1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1603939427007},{"path":"D:\\jiao\\uni-app\\management1\\node_modules\\babel-loader\\lib\\index.js","mtime":1603939453085},{"path":"D:\\jiao\\uni-app\\management1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1603939427007},{"path":"D:\\jiao\\uni-app\\management1\\node_modules\\vue-loader\\lib\\index.js","mtime":1603939447929}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\jiao\\\\uni-app\\\\management1\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"User\",\n  data: function data() {\n    return {\n      search: \"\",\n      total: 1,\n      pagenum: 1,\n      pagesize: 4,\n      userlist: []\n    };\n  },\n  components: {},\n  created: function created() {\n    this.getuserinfo();\n  },\n  methods: {\n    getuserinfo: function () {\n      var _getuserinfo = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var AUTH_TOKEN, res, _res$data, _res$data$data, total, users, _res$data$meta, msg, status;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // 2.虽然按照接口文档将参数传递过去了,但还是获取不到数据,需要授权的API,必须在请求头中使用Authorization 字段提供token 令牌\n                // 获取token值\n                AUTH_TOKEN = localStorage.getItem(\"token\"); // 设置请求头\n\n                this.$http.defaults.headers.common[\"Authorization\"] = AUTH_TOKEN; // 1.请求列表的数据\n\n                _context.next = 4;\n                return this.$http.get(\"users?query=\".concat(this.search, \"&pagenum=\").concat(this.pagenum, \"&pagesize=\").concat(this.pagesize));\n\n              case 4:\n                res = _context.sent;\n                //有参数要传递参数\n                console.log(res); // 拿到数据后将要用到的数据结构出来\n\n                _res$data = res.data, _res$data$data = _res$data.data, total = _res$data$data.total, users = _res$data$data.users, _res$data$meta = _res$data.meta, msg = _res$data$meta.msg, status = _res$data$meta.status;\n\n                if (status === 200) {\n                  // 1.给表格数据赋值\n                  this.userlist = users; // 2.给total赋值\n\n                  this.total = total; // 3.提示\n\n                  this.$message.success(msg);\n                } else {\n                  this.$message.warning(msg);\n                }\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getuserinfo() {\n        return _getuserinfo.apply(this, arguments);\n      }\n\n      return getuserinfo;\n    }()\n  }\n};",{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,CAFA;AAGA,MAAA,OAAA,EAAA,CAHA;AAIA,MAAA,QAAA,EAAA,CAJA;AAMA,MAAA,QAAA,EAAA;AANA,KAAA;AAQA,GAXA;AAYA,EAAA,UAAA,EAAA,EAZA;AAaA,EAAA,OAbA,qBAaA;AACA,SAAA,WAAA;AACA,GAfA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,WADA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA,gBAAA,UAJA,GAIA,YAAA,CAAA,OAAA,CAAA,OAAA,CAJA,EAKA;;AACA,qBAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA,CAAA,eAAA,IAAA,UAAA,CANA,CAQA;;AARA;AAAA,uBASA,KAAA,KAAA,CAAA,GAAA,uBACA,KAAA,MADA,sBACA,KAAA,OADA,uBACA,KAAA,QADA,EATA;;AAAA;AASA,gBAAA,GATA;AAWA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,GAAA,EAZA,CAaA;;AAbA,4BAiBA,GAAA,CAAA,IAjBA,6BAeA,IAfA,EAeA,KAfA,kBAeA,KAfA,EAeA,KAfA,kBAeA,KAfA,6BAgBA,IAhBA,EAgBA,GAhBA,kBAgBA,GAhBA,EAgBA,MAhBA,kBAgBA,MAhBA;;AAkBA,oBAAA,MAAA,KAAA,GAAA,EAAA;AACA;AACA,uBAAA,QAAA,GAAA,KAAA,CAFA,CAGA;;AACA,uBAAA,KAAA,GAAA,KAAA,CAJA,CAKA;;AACA,uBAAA,QAAA,CAAA,OAAA,CAAA,GAAA;AACA,iBAPA,MAOA;AACA,uBAAA,QAAA,CAAA,OAAA,CAAA,GAAA;AACA;;AA3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAhBA,CAAA","sourcesContent":["<template>\r\n  <el-card class=\"box-card\">\r\n    <!-- 面包屑 -->\r\n    <!-- 首页用户管理用户列表 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item>首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!-- 搜索框 -->\r\n    <el-row class=\"row\">\r\n      <el-col>\r\n        <el-input placeholder=\"请输入内容\" v-model=\"search\" class=\"input\">\r\n          <el-button slot=\"append\" icon=\"el-icon-search\"></el-button>\r\n        </el-input>\r\n        <el-button type=\"primary\" class=\"btn\">添加用户</el-button>\r\n      </el-col>\r\n    </el-row>\r\n    <!-- 表格 -->\r\n    <el-table :data=\"userlist\" stripe style=\"width: 100%\">\r\n      <el-table-column type=\"index\" label=\"#\" width=\"50\"> </el-table-column>\r\n      <el-table-column prop=\"username\" label=\"姓名\" width=\"120\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"email\" label=\"邮箱\"> </el-table-column>\r\n      <el-table-column prop=\"mobile\" label=\"电话\"> </el-table-column>\r\n      <el-table-column label=\"时间\">\r\n        <!-- 关于时间格式化的用法   prop=\"create_time |fmtiem\"  不行 -->\r\n        <!-- 1 如果单元格的内容不是文本 需要给该内容外层加容器 template 才会显示 -->\r\n        <!-- 2 作用域拿值问题  一个组件如何想拿另一个组件里面的值则使用: slot-scope=\"scope\" \r\n\t   \t\t这里的scope就是数据源  要拿数据源里面的值 scope.row.具体数据源里面的值-->'\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.create_time | fmtiem }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"role_name\" label=\"角色\"> </el-table-column>\r\n      <el-table-column prop=\"mg_state\" label=\"状态\">\r\n\t\t<template slot-scope=\"scope\">  \r\n       \t\t<el-switch \r\n       \t\t  v-model=\"scope.row.mg_state\"\r\n       \t\t  active-color=\"#13ce66\"\r\n       \t\t  inactive-color=\"#ff4949\"\r\n       \t\t>\r\n       \t\t</el-switch>\r\n\t\t</template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"address\" label=\"操作\">\r\n  \t\t<el-button size=\"mini\" plain type=\"primary\" icon=\"el-icon-edit\" circle></el-button>\r\n  \t\t<el-button size=\"mini\" plain type=\"success\" icon=\"el-icon-delete\" circle></el-button>\r\n  \t\t<el-button size=\"mini\" plain type=\"danger\" icon=\"el-icon-s-tools\" circle></el-button>\r\n\t  </el-table-column>\r\n    </el-table>\r\n    <!-- 分页 -->\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"User\",\r\n  data() {\r\n    return {\r\n      search: \"\",\r\n      total: 1,\r\n      pagenum: 1,\r\n      pagesize: 4,\r\n\r\n      userlist: [],\r\n    };\r\n  },\r\n  components: {},\r\n  created() {\r\n    this.getuserinfo();\r\n  },\r\n  methods: {\r\n    async getuserinfo() {\r\n      // 2.虽然按照接口文档将参数传递过去了,但还是获取不到数据,需要授权的API,必须在请求头中使用Authorization 字段提供token 令牌\r\n      // 获取token值\r\n      const AUTH_TOKEN = localStorage.getItem(\"token\");\r\n      // 设置请求头\r\n      this.$http.defaults.headers.common[\"Authorization\"] = AUTH_TOKEN;\r\n\r\n      // 1.请求列表的数据\r\n      const res = await this.$http.get(\r\n        `users?query=${this.search}&pagenum=${this.pagenum}&pagesize=${this.pagesize}`\r\n      ); //有参数要传递参数\r\n      console.log(res);\r\n      // 拿到数据后将要用到的数据结构出来\r\n      const {\r\n        data: { total, users },\r\n        meta: { msg, status },\r\n      } = res.data;\r\n      if (status === 200) {\r\n        // 1.给表格数据赋值\r\n        this.userlist = users;\r\n        // 2.给total赋值\r\n        this.total = total;\r\n        // 3.提示\r\n        this.$message.success(msg);\r\n      } else {\r\n        this.$message.warning(msg);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.box-card {\r\n  height: 100%;\r\n}\r\n.input {\r\n  width: 300px;\r\n}\r\n.btn {\r\n  margin-left: 15px;\r\n}\r\n.row {\r\n  margin-top: 20px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/user"}]}